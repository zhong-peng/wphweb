"use strict";require(["config"],function(){require(["jquery","header","footer","template","tools"],function(f,o,t,p,u){f("header").load("/html/component/header.html",function(){console.log("end"),o.welcome()}),f("footer").load("/html/component/footer.html",function(){console.log("end")});var e=location.search.slice(1).split("="),d={};d[e[0]]=e[1],f.ajax({url:"http://localhost/workplace/11.3/projectserver/api/detail.php",data:d,method:"POST",dataType:"json",success:function(o){if(1===o.code){var t=p("detil-template",{product:o.product});f("#container2").html(t);var e,l,n,c=f("#num").val();e=o.product.price,l=o.product.img3,n=o.product.strong,d.price=e,d._img=l,d.strong=n,console.log(d)}f("#plus").on("click",function(){console.log(111),c++,f("#num").val(c)}),f("#minus").on("click",function(){console.log(111),c--,f("#num").val(c)}),f("#btn_buy").click(function(o){var t=parseInt(f("#num").val());if(d.num=t,u.cookie("cart")){for(var e=u.cookie("cart"),l=JSON.parse(e),n=0;n<l.length;n++)if(l[n].id===d.id){l[n].num=l[n].num+t,console.log(222),console.log(l[n].num);break}n===l.length&&l.push(d);var c=JSON.stringify(l);u.cookie("cart",c)}else{(l=[]).push(d),console.log(111),console.log(d);c=JSON.stringify(l);u.cookie("cart",c)}window.location.href="http://localhost:1807/html/cart.html",o.preventDefault()});var i=u.$("#fdj_box"),s=u.$(".fdj")[0],a=u.$(".max_box")[0],r=u.$(".max_pic")[0];i.onmousemove=function(o){var t=(o=o||event).clientX-u.getPosition(i).left-s.offsetWidth/2,e=o.clientY-u.getPosition(i).top-s.offsetHeight/2;console.log(t,e),t<0&&(t=0),e<0&&(e=0),t>i.offsetWidth-s.offsetWidth&&(t=i.offsetWidth-s.offsetWidth),e>i.offsetHeight-s.offsetHeight&&(e=i.offsetHeight-s.offsetHeight),s.style.display="block",a.style.display="block",console.log(t,e),s.style.left=t+"px",s.style.top=e+"px",r.style.left=-3*t+"px",r.style.top=-3*e+"px"},i.onmouseleave=function(){s.style.display=a.style.display="none"}}})})});